<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <title>Meteoropolis</title>
  <link rel="stylesheet" href="assets/globals.css">
  <link rel="stylesheet" href="assets/styles.css">
</head>

<body>
  <main class="content">
    <header class="header">
      <h1 class="title">
        <i>Meteor</i>
        <i>opolis</i>
      </h1>
    </header>

    <figure class="photo" id="photo"></figure>

    <div class="info">
      <p class="info__item info__item--conditions" id="conditions"></p>
      <p class="info__item info__item--credits">
        <a href="#" id="credit-user"></a>
        <span>on</span>
        <a href="#" id="credit-platform">Unsplash</a>
      </p>
    </div>

    <div class="thumbs" id="thumbs"></div>

    <div class="controls">
      <form class="search" id="search">
        <label class="search__label" for="search-tf">City</label>
        <input class="search__input" id="search-tf" name="city" placeholder="Enter city name" autocomplete="city" />
        <button class="btn search__btn">Go</button>
      </form>
    </div>
  </main>

  <script>
    // Example JavaScript (you'll need to expand on this)
    const searchForm = document.getElementById('search');
    const cityInput = document.getElementById('search-tf');
    const photoElement = document.getElementById('photo');
    const conditionsElement = document.getElementById('conditions');
    const creditUserElement = document.getElementById('credit-user');
    const thumbsElement = document.getElementById('thumbs');

    searchForm.addEventListener('submit', async (event) => {
      event.preventDefault();
      const city = cityInput.value;

      try {
        // Replace with your actual API calls for weather and photos
        const weatherData = await fetchWeatherData(city);
        const photoData = await fetchPhotoData(city);

        displayWeatherData(weatherData);
        displayPhotoData(photoData);

      } catch (error) {
        console.error('Error:', error);
        conditionsElement.textContent = 'Error fetching data.';
      }

    });

    async function fetchWeatherData(city) {
      // Replace with your weather API endpoint and API key
     .,
      const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;

      const response = await fetch(apiUrl);
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }
      return response.json();
    }

    async function fetchPhotoData(city) {
        //Replace with your unsplash API endpoint and API key
        const apiKey = 'YOUR_UNSPLASH_API_KEY';
        const apiUrl = `https://api.unsplash.com/photos/random?query=${city}&client_id=${apiKey}`;

        const response = await fetch(apiUrl);
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        return response.json();
    }

    function displayWeatherData(data) {

      if (data && data.main && data.weather && data.weather[0]) {
        const temperature = data.main.temp;
        const description = data.weather[0].description;
        conditionsElement.textContent = `${temperature}Â°C, ${description}`;
      } else {
        conditionsElement.textContent = 'Weather data not available.';
      }
    }

    function displayPhotoData(data) {
        if(data && data.urls && data.user){
            photoElement.style.backgroundImage = `url(${data.urls.regular})`;
            creditUserElement.textContent= data.user.name;
            creditUserElement.href = data.user.links.html;
        }else{
            photoElement.style.backgroundImage = 'none';
            conditionsElement.textContent = 'Photo data not available.';
        }
    }
  </script>
</body>

</html>